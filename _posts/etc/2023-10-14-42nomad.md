---
layout: post
title: 42Seoul 소프트웨어 경진대회 회고
subtitle: "첫 대회 참가, 첫 프로젝트 배포"
categories: etc
tags:
- etc
- 42Seoul
comments: true
published: true
---
# 소프트웨어 경진대회 회고록
## 참여 계기
&nbsp;2023년 7월 27일 42 서울 Slack에 소프트웨어 경진대회 참가자 모집 글이 올라왔다.
슬기로운 42 생활이라는 주제로 42 서울에서 학습하며 필요하다고 생각한 서비스를 직접 제작하며 1등에게는 해외캠퍼스 방문 기회도 제공하는 대회였다.  
&nbsp;정말 참여하고 싶은 대회였지만 그 당시 이너서클의 마지막 팀 프로젝트를 끝내지 못한 상황이라 새로운 프로젝트를 시작하는 게 많은 부담이기도 했고 다른 팀원들에게 폐가 될까 봐 망설이고 있었다.
그때 이전에 팀 프로젝트를 진행하기도 했고 같이 스터디도 많이 한 동료분이 먼저 같이 참가하자고 얘기를 해주셔서 대회에 참가하게 되었다.
## 프로젝트의 시작
&nbsp;8월 2일 대회 설명회를 듣고 바로 클러스터에 있는 테이블에 모여 아이디어 회의부터 시작했다.
여러 아이디어가 나왔고 계속된 회의 결과 2가지의 주제로 좁혀지게 되었다.
첫 번째 아이디어는 미국의 익명 소셜 미디어 앱인 Gas를 42 커뮤니티 내부에 맞게 개발하자는 아이디어였고, 두 번째는 클러스터에 있는 모든 자리에 대한 정보를 제공하는 웹 서비스를 개발하는 것이었다.
팀원들과 얘기를 나눠본 결과 경진대회의 성격과 웹 서비스에 대한 적합성을 고려해 봤을 때 2번 아이디어가 선택되었고 한 달 동안의 프로젝트가 시작되었다.
## 기획 단계
&nbsp;나를 포함 팀원들 모두는 42 서울 5기 2차로 입과 하면서 2년이라는 시간 동안 클러스터를 이용했기 때문에 많은 불편한 점들을 인지한 상태였고, 주변 사람들에게 물어보면서 클러스터를 이용하면서 불편하다고 느낀 점들을 취합했다.
그 결과 크게 4가지의 불편한 점을 찾을 수 있었다. 
1. 내가 앉고 싶은 자리의 상태를 쉽게 확인할 수 없다.
2. 회의실을 사용하고 싶으면 클러스터를 돌아다니며 직접 확인해야 한다.
3. 자리에 짐이 올려져 있으면 치워도 되는지 알 수 없다.
4. 한 자리를 계속 이용하는 것이 편한 과제들이 있는데 내가 어떤 자리를 앉았는지 헷갈린다.

우리는 이러한 문제점들을 해결하기 위해 다음의 기능을 가진 웹 서비스를 기획하기 시작했다.
1. 즐겨찾기 한 자리들의 상태를 쉽게 확인할 수 있다.
2. 회의실의 실시간 사용상태를 알 수 있다.
3. 자리가 비워진 시간을 표기하여 분실물을 처리하고 처리한 위치를 기록할 수 있다.
4. 내가 앉았던 자리들을 기록하여 알 수 있다.
   
&nbsp;기능들을 구상하며 회의실의 실시간 사용상태를 IoT기기를 통해 관리하고, 알림 설정 기능을 도입하여 특정 자리의 상태가 변경될 때 Slack Bot을 통해 자리 정보를 알려주는 기능을 추가하였다.  
우리의 웹 서비스에 대한 개발 계획서를 제작하여 대회 참가 신청을 했고 얼마 뒤 합격 통보를 받고 바로 개발에 들어갔다.


## 협업
### 공통
&nbsp;우리 팀은 백엔드 2명 프론트 2명으로 구성되었는데 처음과 끝부분을 제외하면 백과 프론트가 거의 분리되어서 개발을 진행했다.  
API 를 백엔드 팀에서 설계한뒤 프론트와 같이 회의를 진행하며 수정하는 시간을 가졌고 그 이후로는 해당 기능을 개발 하면 알려주는 식으로 진행하였는데 한 달이라는 짧은 시간 내에 개발할 수 있었던 가장 큰 이유였던것 같다.  
 팀장님의 제안으로 Jira, Confluence 를 사용하여 문서화를 한 이후에 진행했기 때문에 요구사항을 재확인 하는 번거로움이 많이 줄었고, 각각의 기능에 대한 피드백도 즉각적으로 이루어지면서 정말 소프트웨어 공학적으로 진행되었는데 학교 수업, 동아리에서 했던 팀플, 2년간의 42서울 에서 진행한 많은 팀 프로젝트 중에서 최고의 협업을 경험했다.  

### 백엔드
&nbsp;팀장님과 한 팀이 되어서 백엔드 개발을 진행하게 되었다. 백엔드에서 진행해야 할 부분은 크게 비즈니스 로직, 회원 관리, 인증 인가, IoT, 추가기능, 배포 였고, 그 중에서 나는 회원 관리, IoT, 추가 기능, 배포를 맡게 되었다. 인증 인가와 보안 측면에서 Spring Security 와 JWT 를 이용하기로 했고 프론트와의 분리 배포를 하면서 배포 자동화까지 진행해보자는 목표를 가지고 개발을 시작했다. 

## 사용한 기술들과 이유
백엔드 개발을 진행하는 동안 사용한 기술들은 다음과 같다.
- AWS 
  - EC2
  - RDS(MariaDB)
  - IoT
  - Lambda
  - S3
  - CodeDeploy
  - Route53
- Spring Boot
- Spring Security
- GitHub Action

&nbsp;IoT 기기들을 찾아본 결과 우리가 직접 하드웨어를 개발하기에는 한 달 이라는 시간은 너무 촉박했고, AWS 에서 제공하는 IoT 1-Click Button 기기를 통해 우리가 원하는 기능을 빠르게 구현할 수 있다는 생각이 들었다.  
&nbsp;AWS 크레딧을 42 서울 월렛마켓을 통해 구할 수 있다는 점도 AWS를 선택한 주요한 이유 중 하나였다.  
더욱 빠른 구현을 위해 DB를 쉽게 연결하고 설계한 DB 테이블도 정형화된 데이터 구조였기 때문에 RDS를 통해 MariaDB 로 구성했다.  
&nbsp;팀장님도 경험이 있고, 나도 깊게 공부해보진 않았지만 익숙한 Spring Boot 를 선택하게 되었고
여러 기술들을 사용해보기 위해서 Spring Security 를 적용하여 인증 인가 관리를 구성했다.
개발 워크플로를 자동화하기 위해서 Jekins 와 GitHub Action을 고려했는데 보다 빠른 구현을 위해서 복잡한 절차 없이 쉽게 사용할 수 있는 GitHub Action을 최종 선택하게 되었다.  
## 구현 
### 자동 배포 구현하기
&nbsp;API 서버를 본격적으로 개발하기 전에 배포 자동화를 시작했다. 기존에 AWS EC2를 사용해 본 적이 있긴 했지만 인터넷 강의를 보며 인스턴스를 생성해보기만 했던 게 다였는데 실제 서비스를 심지어 자동화까지 곁들여서 배포해야 한다니.. 촉박한 시간 내에 할 수 있을지 걱정이 됐다. 자동 배포를 위해서는 EC2뿐만이 아니라 S3, CodeDeploy 등 다른 서비스들을 연결해야 했고 여러 블로그를 통해 정보를 얻다 보니 설정 정보들이 뒤섞이기도 하는 불상사가 일어나기도 했다.
### 자동 배포 설정하기
GitHub Action 을 통한 배포 자동화는 다음과 같이 이뤄진다.
1. Github 저장소에 사용자가 설정한 특정 이벤트가 일어난다. (main 브렌치 푸시 or 특정 브렌치 푸시)
2. GitHub Action 가상환경 내에서 프로젝트 빌드를 수행한다.
3. AWS S3 에 빌드된 파일을 업로드한다.
4. GitHub Action 에서 AWS Code Deploy 를 실행시킨다.
5. EC2 서버에서 S3 에 저장된 빌드된 파일을 가져와 실행시킨다.

&nbsp;다음을 실행하기 위해서는 AWS IAM 서비스를 이용해 각 자원에 대한 권한을 가진 키를 생성하여 GitHub Action에 넘겨주어야 한다. (Setting -> Secret)
우리 팀은 기능별로 브렌치 를 만들어 개발한 후 dev 브렌치에 PR 을 날려 코드 리뷰를 진행한 뒤 main 에 머지 하는 방식으로 배포를 수행했다.  
이러한 방식을 통해 배포에 걸리는 시간을 크게 단축할 수 있었다.
### RDS 연결하기 
&nbsp;EC2 에 따로 DB 를 세팅하여 구성할 수도 있지만 사용해보고 싶기도 했고 간편한 설정을 위해서 (크레딧이 많기도 했다.) RDS 를 사용해여 EC2 와 연결했다. Spring JPA 를 통해 ORM 으로 구성하니 테이블도 쉽게 구성할 수 있어 시간을 많이 아꼈다.
### DNS 구성하기
&nbsp;비즈니스 로직은 회원에 대한 간단한 히스토리, 즐겨찾기 등 복잡한 내용이 없었기 때문에 쉽게 구현했다.  
실제 서비스를 위해서 가비아에서 도메인을 구매한 뒤 AWS Route 53 을 통해 도메인 네임 서버를 등록하고 프론트의 S3 를 AWS 에서 제공하는 CDN 서비스인 CloudFront 로 배포한 뒤 도메인을 연결해 준 뒤 백엔드에서 구성한 EC2 에 위치한 API 서비스와 연결하려고 했으나 cors 오류가 발생하는 이슈가 있었다.  
EC2 인스턴스의 주소를 탄력적 IP 주소 연결 옵션을 통해서 단순히 고정만 했었는데 프론트는 SSL 인증서를 통해 https 를 사용하는데 EC2는 별도의 설정을 하지 않아 http 를 이용하기 때문에 생기는 문제였다.  
EC2에서도 https를 사용하기 위해서 서브 도메인을 하나 등록한 뒤 로드밸런서를 연결해주고 SSL 인증서를 발급받으니 해결되었다.
### IoT 구성하기 
&nbsp;프로젝트를 시작하면서 가장 걱정된 부분이 바로 IoT 부분이었다. 개발 계획서에서도 중요하게 들어간 필수 기능이었지만 IoT에 대해 공부해 본적도 없고 해외에서 주문한 제품이라 제대로 동작하지 않는다면 다른 기기로 시도해보기도 어려운 상황이었다.    
내가 직접 찾아본 제품이라 실패한다면 팀원들에게 너무 미안할거 같았다.  
예상외로 제품은 금방 도착했다. 바로 뜯고 건전지를 넣으려고 보니 기기가 건전지에 비해 너무 작아서 다시 확인해보니 규격이 아닌 특정 건전지를 사용하라고 나와있었고 건전지를 주문 후 다시 기다려야 했다.  
그런데 새로 주문한 건전지도 들어가지 않아서 스트레스를 엄청 받았는데 옆에 있던 동료가 힘으로 넣어줬다... 확인 결과 제품은 잘 동작하지만 기기를 위한 앱이 안드로이드에서만 되는데다 업데이트를 지원하지 않고 마지막 버전은 심지어 최신 안드로이드 버전에서는 받을 수 없는 이슈가 발생했다. 한참을 헤매다 apk 를 직접 인터넷에서 찾아 다운 받아 해결 할 수 잇었다.  
&nbsp;IoT 1-Click Button 기기를 사용했는데 AWS 에서 지원하는 기능을 통해서 AWS Lambda 를 동작시키고 API 서버에 요청을 보내는 식으로 구성했다.  
기기를 클러스터 와이파이에 연결 시킨뒤 회의실에 배치하는 식으로 해당 회의실의 상태를 변경할 수 있도록 구성했다.  
### 추가기능들
&nbsp;계획했던 기능 개발이 큰 문제 없이 예정대로 끝나서 계획서에 적진 않았지만 있으면 좋겠다고 생각했던 기능들도 추가하기로 했다.  
&nbsp;첫 번째 기능은 슬랙봇 메시지 였다. 어려울 것이라 예상했지만 슬랙 API 가 상세하게 설명되어 있어서 쉽게 구현할 수 있었다. 42서울에서 쓰는 슬랙 워크스페이스에서는 봇 추가를 위해 파리의 승인이 있어야 했기 때문에 별도의 워크스페이스를 생성하여 봇을 구현했다. 알림을 보기 위해서는 사용자가 새로 생성한 슬랙 워크스페이스에 들어와야 했기 때문에 만약 사용자가 존재하지 않는다면 42서울에 등록한 이메일을 통해 초대 링크를 보내는 로직을 추가했다. 초대 메일은 구글의 SMTP 를 이용하여 DB 에 저장해 놓은 초대 링크를 사용자에게 보내는 식으로 구현했다.  
&nbsp;두 번째 기능은 재단에서 예약을 통해 관리하는 회의실들의 예약 현황을 가져오는기능이었다.  
마지막까지도 기능을 추가할지 말지 의견이 나뉘는 상태였지만 일단 만들어 놓기로 했다. 재단 웹사이트에서 개발자 기능을 응용해서 데이터를 찾아볼 때 정보들이 추출하기 어려운 형태여서 걱정했지만 Jsoup 라이브러리를 이용해서 조작하니 생각보다 깔끔하게 데이터를 뽑아내어 웹 스크래핑을 성공적으로 구현할 수 있었다. 하지만 대회 기간 막바지라 페이지를 추가하기엔 무리가 있어서 결과물에는 포함되지 못했다.   
## 느꼈던 점 
&nbsp;42 서울 과정을 2년 동안 진행하며 많은 팀 프로젝트들을 수행했다. 함께했던 모든 팀에서 만족했지만, 이번 프로젝트만큼 팀원이 다 같이 몰입하고, 즐겁게 참여했던 적은 처음이었다. 기획에서부터 테스트, 배포까지 일련의 과정에서 정말 많은 것을 배웠고 여태까지 컴퓨터 공학을 공부했던 이유가 이런 프로젝트를 하기 위해서였구나 라고 느꼈다.  
&nbsp; 짧은 시간내에 이뤄지고 배경지식이 충분하지 않은 상태에서 진행했기 때문에 다른 팀원에게 코드리뷰를 꼼꼼히 해주지 못했고, 내가 작성한 코드들도 100% 이해하지 못했다는 점, 테스트 자동화를 통한 CI 를 구성하지 못했다는 점 등 많은 아쉬움이 남지만 한 달동안 정말 최선을 다 했기 때문에 만족한다.  
&nbsp; 앞으로는 훨씬 더 많고 복잡하고 어려운 프로젝트들을 많이 하겠지만 이번 대회의 경험이 그 모든 일들에서 든든한 지지대가 될 것 같다. 다시 한 번 우리팀 모두에게 고마움을 전한다.  








