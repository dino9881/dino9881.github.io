---
layout: post
title: ft_printf
subtitle: "ft_printf 구현하기"
categories: 42seoul
tags:
- 42
- TIL
comments: true
published: true
---

# ft_printf 과제 하기

## 목표  

ft_printf 는 c 언어에서 제공하는 표준 입출력 함수 printf를 직접 구현하는 과제이다.  
보너스 과제는 악명이 높아서 Mandatory 부분만 구현하였다.  
  
  
### 구현할 서식 지정자  
- %c -> 문자
- %s -> 문자열
- %p -> 포인터의 메모리 주소
- %d -> 부호있는 10진 정수
- %i -> 부호있는 10진 정수
- %u -> 부호없는 10진 정수
- %x -> 부호없는 16진 정수 소문자로 표현 
- %X -> 부호없는 16진 정수 대문자로 표현
- %% -> '%' 기호 출력 

## 아이디어  

아이디어는 다음과 같다.  
ft_printf(const char *s, ... ) 의 모양으로 들어왔을때  
s 문자열에서 '%' 기호가 나오지 않았다면 그대로 출력하고, 나왔다면 %기호 다음에 나오는 문자를 보고 판단해서  
각각에 맞는 형식으로 출력을 해준다.  printf 함수의 반환 값은 출력한 문자의 개수 이므로 출력하면서 개수를 세 준뒤 마지막에 반환한다.  


## 배경지식  

printf 함수의 인자는 다른 함수들처럼 정해져있지 않는 가변인자 함수이다.  
c언어에서는 이러한 가변인자 함수들을 위해서 스택에서 읽어올수있는 va_list를 지원한다.
va_list는 포인터로 가변인자 함수들의 인자들을 가르킬 수 있다.  
va_list 를 선언해준뒤 , va_start 로 가변인자의 첫번째 인수를 가르키도록 초기화를 해준다. 
va_start는 va_list 와 고정인수를 받아 초기화를 시켜준다.  
초기화를 한 후에는 va_arg 에 va_list와 읽을 인자의 타입을 전달해주면 va_list값의 갱신과 인자의 값을 읽어오는 것을 동시에 처리해준다.  
일반적인 함수에는 타입을 인자로 넘길 수 없지만 va_arg 는 매크로 함수이기 때문에 가능하게 한다.  







