---
layout: post
title: Born2beroot 시작하기
subtitle: "Born2beroot"
categories: 42seoul
tags:
- 42
- Born2beroot
- TIL
comments: true
published: true
---
# Born2beroot 시작하기  

## Virtual Box 를 설치하자 
Virtaul Box : 오라클에서 배포하고 있는 가상머신 소프트웨어  
[Virtual Box Download](https://www.virtualbox.org/wiki/Downloads)  

- M1칩을 사용하는 맥북에서는 Virtual Box 를 지원하지 않아 UTM을 사용해야했다...
[UTM Download](https://mac.getutm.app)


## 가상머신을 만들고 운영체제를 설치하자  

### 가상머신을 만들자  
UTM 을 실행시키고 Create 를 누른뒤 설정을 해준다. 메모리는 1GB 로 설정한뒤 가상디스크를 추가해준다.   
NVMe라는 디스크를 설치했다. (빠른속도를 지원하는 전송프로토콜)
iso파일을 가상머신에 넣기위한 USB 드라이브도 하나 추가한다.  


### Debian을 설치하자
[Debian Download](https://www.debian.org/download)  
다운로드를 하게되면 iso 파일이 생기게 된다.  
파일을 USB 드라이브에 넣어준뒤, 가상머신을 실행하면 설치가 진행된다. (Console 상태에서는 오류가 발생하니 Display 옵션을 Graphic 으로 변경하고 진행한다.)  
루트 사용자, 비밀번호등 과제에서 요구하는대로 설정을 해주고 암호화된 파티션을 만들기 위해서 Partition Disk 를 Manual로 설정해준다.  
기존에 생성한 NVMe 디스크를 파티션 해준다.


### 요구사항 맞추기  
과제에서 요구한 사항들은 다음과 같다.  
1. LVM을 이용해서 최소 2개의 암호화된 파티션을 생성해야 한다.  
   -> 데비안 설치 과정에서 생성 가능하다.  
2. SSH 서비스는 4242 포트에서만  작동해야 하며 SSH 를 이용한 루트 연결을 허용하면 안된다.  
3. UFW 방화벽을 이용하여 운영체제를 설정해야 하므로, 4242포트만 열어두어야 한다.  
4. sudo를 설치학고 설정하여야 한다. 
 - sudo 인증시 패스워드가 틀렸을 때 3번의 기회만이 주어져야 한다.  
 - sudo 권한 사용 중에는 비밀번호가 틀렸을때 설정한 오류 메시지가 출력되어야 한다.  
 - sudo 권한을 이용하여 수행한 명령어들응ㄴ 입출력 모두 기록되어야 한다. 해당 기록은 log 파일로 /var/log/sudo/ 폴더에 저장되어야 한다.
 - TTY모드는 활성화 되어 있어야 한다.    
 - sudo 권한으로 이용할 수 있는 폴더 경로는 반드시 제한되어야 한다.  

5. 루트 사용자 외에도, 로그인 아이디를 유저명으로 사용하는 유저가 있어야 하며, 이 유저는 반드시 user42와 sudo 그룹에 포함되어야 한다.  
6. 강력한 패스워드 정책을 설정해야 한다.  
 - 패스워드는 30일마다 소멸되어야 한다.  
 - 패스워드 변경시 최소 2일간 사용해야한다.  
 - 패스워드 소멸 7일 전에 경고 메세지를 받아야한다.  
 - 패스워드는 최소 10개 이상의 대문자와 숫자를 포함된 암호여야 하며, 같은 글자가 3번 이상 연속되면 안된다.  
 - 패스워드에 유저명이 포함되면 안된다.  
 - 패스워드는 이전 비밀번호에 포함되지 않는 문자를 최소 7개 이상 포함하여야한다.  
 7. bash 환경에서 작동하는 mornitoring.sh 라는 스크립트를 작성해야 하며, 서버가 시작될때 아래 목록에 있는 정보들을 10분에 한 번 씩 보여줘야 한다.  
 - 사용하는 운영체제의 아키텍쳐와 커널 버전
 - 물리 프로세서의 개수  
 - 가상 프로세서의 개수  
 - 서버 내에서 사용가능한 램과 가동률 을 백분율로 표시  
 - 마지막 부팅 시간과 날짜  
 - LVM이 활성화 되었는지 여부 
 - 활성화된 연결의 수 
 - 서버를 사용하고 있는 유저의 수
 - 서버의 IPv4 주소와 MAC 주소
 - sudo로 실행된 커맨드의 수







